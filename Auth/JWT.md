# 🗝 JWT
<div align="center">
    <img src="./img/cover.png">
</div>

### 1️⃣ JWT 개념
> **Json Web Token**의 약자로,
> Json 포맷을 이용하여 사용자에 대한 속성을 저장하는 [Claim](../ETC/ETC.md###Claim이란?) 기반의 Web Token이다.

일반적으로 클라이언트와 서버, 서비스와 서비스 사이 통신 시 권한 인가(Authorization)를 위해 사용하는 토큰을 뜻합니다.

<br>

### 2️⃣ JWT 등장배경
일반적인 인증 로직을 보도록 합시다.
<div align="center">
    <img src="./img/t_1.png">
</div>
<br>

사용자가 ID, PW를 입력하고, 그 데이터가 서버로 전송이 됩니다.<br>
서버에서는 전송받은 ID, PW를 **DB**에 조회하고 회원이면 로그인을 시켜줍니다.<br><br>

그런데 문제는 여기서 생기게됩니다.<br>
HTTP는 **Stateless**, 즉 사용자가 새로운 요청을 한다면 과거에 로그인한 사실을 기억하지 못합니다.<br>

> `여기서 잠깐!`
[HTTP에 대해서 궁금하다면?🤔](../Internet/http.md)

이 문제를 해결하기 위해서 예전에는 로그인 할 때 DB에 누가 로그인했는지 기록해야 했습니다.<br><br>

그래서 나온게 쿠키와 세션이였는데, 쿠키와 세션에는 각각 문제점들이 있었습니다.<br>

#### 🍪 쿠키의 문제점
* ***보안 취약점***
요청 시 쿠키 값을 그대로 보내는 등 보안이 유지되어야 할정보가 그대로 노출되어 전송이 되거나 쿠키 자체가 유출되면 보안에 문제가 생긴다.
* ***브라우저 지원***
웹 브라우저마다 쿠키의 지원 형태가 다르기 때문에 브라우저를 변경 시 사용이 불가능하다.
* ***적은 저장 용량***
사이트 당 20개, 모두 합쳐 300개가 최대이며 각 쿠키는 4KB를 넘을 수 없는 등 한번에 하나의 정보만 저장 가능하다.

#### 🗃 세션의 문제점
* ***서버 및 세션 저장소의 부하***
세션을 각 서버에 저장하지 않고 세션 전용 서버, DB에 저장해도 문제가 생긴다.<br>
모든 요청을 해당 서버에 조회해야 하기 때문에 DB부하를 야기할 수 있다.<br>
* ***서버 확장시 세션 정보의 동기화 문제***
서버가 스케일아웃 되서 여러개가 생기면, 각 서버마다 세션 정보가 저장된다.<br>
로그인시 서버1로, 새로고침시 서버2로 접근하면 서버는 인증이 되지 않았다고 판단한다.<br>
* ***웹 / 앱간의 상이한 세션 처리 로직***
기존의 Client 는 웹 브라우저가 유일했으나, 이제는 모바일로 접근하는 경우도 처리해야 한다.<br>
웹 / 앱의 세션 처리 방식이 다르고 또 다른 Client가 생겨나면 그에 맞게 처리해야 한다.<br>

그리고 이를 보완하기 위해서 토큰 기반의 인증방식을 사용하는 추세인데요.<br>
토큰 기반 인증방식의 로직은 이렇습니다.<br>
<div align="center">
    <img src="./img/t_2.png">
</div>
<br>

로그인을 하면 로그인한 사용자를 위한 토큰을 발급합니다.<br>
이 토큰을 가지고 물건 구입, 구입 내역 조회와 같이 계정 정보가 필요한 요청을 할 때 이 토큰과 함께 요청합니다.<br>
토큰에는 요청한 사람의 정보가 담겨있기에 서버는 DB를 조회하지 않고 누가 요청하는지 알 수 있습니다.<br>


### 3️⃣ JWT 특징
- 

### 4️⃣ JWT 구조
<div align="center">
    <img src="./img/jwt.png">
</div>

#### 📍 HEADER(헤더)
-  헤더(Header)는 JWT를 어떻게 검증(Verify)하는가에 대한 내용을 담고 있다.
#### 📍 PAYLOAD(내용)
#### 📍 Signature(서명)